<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customer Churn Prediction</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .container {
    background: white;
    padding: 30px 40px;
    border-radius: 15px;
    box-shadow: 0px 8px 20px rgba(0,0,0,0.15);
    max-width: 450px;
    width: 100%;
    text-align: center;
    animation: fadeIn 1s ease-in-out;
    overflow-y: auto;
    max-height: 90vh;
  }
  h2 { margin-bottom: 20px; color: #333; }
  label { display: block; margin: 12px 0 5px; text-align: left; font-weight: 600; color: #444; }
  input, select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    outline: none;
    font-size: 14px;
    transition: border 0.3s ease;
  }
  input:focus, select:focus { border: 1px solid #4facfe; }
  button {
    margin-top: 20px;
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    border: none;
    color: white;
    font-size: 16px;
    font-weight: 600;
    padding: 12px;
    border-radius: 10px;
    width: 100%;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  button:hover { transform: scale(1.03); box-shadow: 0px 4px 12px rgba(0,0,0,0.2); }
  #result {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    padding: 12px;
    border-radius: 10px;
    display: none;
  }
  .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
  .danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>
<div class="container">
  <h2>üìä Customer Churn Prediction</h2>
  <form id="churnForm">
    <label for="tenure">Tenure (months)</label>
    <input type="number" id="tenure" required>

    <label for="MonthlyCharges">Monthly Charges</label>
    <input type="number" id="MonthlyCharges" step="0.01" required>

    <label for="TotalCharges">Total Charges</label>
    <input type="number" id="TotalCharges" step="0.01" required>

    <label for="gender">Gender</label>
    <select id="gender">
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

    <label for="SeniorCitizen">Senior Citizen</label>
    <select id="SeniorCitizen">
      <option value="0">No</option>
      <option value="1">Yes</option>
    </select>

    <label for="Partner">Partner</label>
    <select id="Partner">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <label for="Dependents">Dependents</label>
    <select id="Dependents">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <label for="PhoneService">Phone Service</label>
    <select id="PhoneService">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <label for="MultipleLines">Multiple Lines</label>
    <select id="MultipleLines">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No phone service">No phone service</option>
    </select>

    <label for="InternetService">Internet Service</label>
    <select id="InternetService">
      <option value="DSL">DSL</option>
      <option value="Fiber optic">Fiber optic</option>
      <option value="No">No</option>
    </select>

    <label for="OnlineSecurity">Online Security</label>
    <select id="OnlineSecurity">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="OnlineBackup">Online Backup</label>
    <select id="OnlineBackup">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="DeviceProtection">Device Protection</label>
    <select id="DeviceProtection">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="TechSupport">Tech Support</label>
    <select id="TechSupport">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="StreamingTV">Streaming TV</label>
    <select id="StreamingTV">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="StreamingMovies">Streaming Movies</label>
    <select id="StreamingMovies">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="No internet service">No internet service</option>
    </select>

    <label for="Contract">Contract</label>
    <select id="Contract">
      <option value="Month-to-month">Month-to-month</option>
      <option value="One year">One year</option>
      <option value="Two year">Two year</option>
    </select>

    <label for="PaperlessBilling">Paperless Billing</label>
    <select id="PaperlessBilling">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <label for="PaymentMethod">Payment Method</label>
    <select id="PaymentMethod">
      <option value="Electronic check">Electronic check</option>
      <option value="Mailed check">Mailed check</option>
      <option value="Bank transfer (automatic)">Bank transfer (automatic)</option>
      <option value="Credit card (automatic)">Credit card (automatic)</option>
    </select>

    <button type="submit">üîÆ Predict</button>
  </form>

  <div id="result"></div>
</div>

<script>
document.getElementById("churnForm").onsubmit = async function(e) {
  e.preventDefault();
  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "block";  
  resultDiv.innerText = "‚è≥ Predicting...";
  resultDiv.className = "";

  // Send raw form values directly (no encoding)
  const data = {
    tenure: parseInt(document.getElementById("tenure").value),
    MonthlyCharges: parseFloat(document.getElementById("MonthlyCharges").value),
    TotalCharges: parseFloat(document.getElementById("TotalCharges").value),
    gender: document.getElementById("gender").value,
    SeniorCitizen: document.getElementById("SeniorCitizen").value,
    Partner: document.getElementById("Partner").value,
    Dependents: document.getElementById("Dependents").value,
    PhoneService: document.getElementById("PhoneService").value,
    MultipleLines: document.getElementById("MultipleLines").value,
    InternetService: document.getElementById("InternetService").value,
    OnlineSecurity: document.getElementById("OnlineSecurity").value,
    OnlineBackup: document.getElementById("OnlineBackup").value,
    DeviceProtection: document.getElementById("DeviceProtection").value,
    TechSupport: document.getElementById("TechSupport").value,
    StreamingTV: document.getElementById("StreamingTV").value,
    StreamingMovies: document.getElementById("StreamingMovies").value,
    Contract: document.getElementById("Contract").value,
    PaperlessBilling: document.getElementById("PaperlessBilling").value,
    PaymentMethod: document.getElementById("PaymentMethod").value
  };

  try {
    const res = await fetch("http://127.0.0.1:5000/predict", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    if (!res.ok) throw new Error("Server error " + res.status);
    const result = await res.json();

    if (result.churn_prediction === 1) {
      resultDiv.innerText = "‚ö†Ô∏è Customer likely to CHURN";
      resultDiv.className = "danger";
    } else {
      resultDiv.innerText = "‚úÖ Customer likely to STAY";
      resultDiv.className = "success";
    }
  } catch(err) {
    console.error(err);
    resultDiv.innerText = "‚ùå Error: " + err.message;
    resultDiv.className = "danger";
  }
};
</script>
</body>
</html>
